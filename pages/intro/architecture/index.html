<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-pages/intro/architecture">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">Heft architecture | Heft</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://heft.rushstack.io/images/site/heft-ograph.jpg"><meta data-rh="true" name="twitter:image" content="https://heft.rushstack.io/images/site/heft-ograph.jpg"><meta data-rh="true" property="og:url" content="https://heft.rushstack.io/pages/intro/architecture/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Heft architecture | Heft"><meta data-rh="true" name="description" content="Read this first ðŸŽˆ"><meta data-rh="true" property="og:description" content="Read this first ðŸŽˆ"><link data-rh="true" rel="icon" href="/images/site/favicon.ico"><link data-rh="true" rel="canonical" href="https://heft.rushstack.io/pages/intro/architecture/"><link data-rh="true" rel="alternate" href="https://heft.rushstack.io/pages/intro/architecture/" hreflang="en"><link data-rh="true" rel="alternate" href="https://heft.rushstack.io/zh-cn/pages/intro/architecture/" hreflang="zh-cn"><link data-rh="true" rel="alternate" href="https://heft.rushstack.io/pages/intro/architecture/" hreflang="x-default"><link rel="search" type="application/opensearchdescription+xml" title="Heft" href="/opensearch.xml">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic,700italic"><link rel="stylesheet" href="/assets/css/styles.ecb83c60.css">
<link rel="preload" href="/assets/js/runtime~main.921998bf.js" as="script">
<link rel="preload" href="/assets/js/main.e60925dc.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div class="suiteNavBar_rHPh"><div role="button" class="waffle_FRnN waffleInteraction_uHqh"><img src="/images/suitenav/rs-waffle.svg"></div><div class="waffleDivider_XicE"></div><a href="https://rushstack.io/" class="suiteNavItem_tL2w">Rush Stack</a><a href="https://rushstack.io/pages/shop/" class="suiteNavItem_tL2w">Shop</a><a href="https://rushstack.io/blog/" class="suiteNavItem_tL2w">Blog</a><a href="https://rushstack.io/community/events/" class="suiteNavItem_tL2w">Events</a></div><div role="region" aria-label="Skip to main content"><a class="skipToContent_gOKz" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/images/site/heft-logo.svg" alt="Heft" class="themedImage_gHi_ themedImage--light_qRI9"><img src="/images/site/heft-logo.svg" alt="Heft" class="themedImage_gHi_ themedImage--dark_a9Fb"></div><b class="navbar__title text--truncate"></b></a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/">Current Release</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/pages/intro/architecture/">Current Release</a></li><li><a class="dropdown__link" href="/0.50.0/pages/intro/architecture/">0.50.0</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_p0dq"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/pages/intro/architecture/" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/zh-cn/pages/intro/architecture/" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-cn">ä¸­æ–‡ï¼ˆä¸­å›½ï¼‰</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/pages/intro/getting_started/">Docs</a><a class="navbar__item navbar__link" href="/pages/support/news/">News</a><a class="navbar__item navbar__link" href="/pages/support/contributing/">GitHub</a><a class="navbar__item navbar__link" href="/pages/support/help/">Help</a><div class="searchBox_nqXy"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper__S2k docsWrapper_qYUW"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_TWh7" type="button"></button><div class="docPage_AvjP"><aside class="theme-doc-sidebar-container docSidebarContainer_Q5zy"><div class="sidebarViewport_EUbl"><div class="sidebar_UuKZ"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_ryys"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active">Introduction</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/intro/getting_started/">Getting started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/pages/intro/architecture/">Heft architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/intro/rig_packages/">Using rig packages</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/intro/cli/">Heft command line</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Heft tutorials</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/tutorials/hello_world/">Hello world</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/tutorials/adding_tasks/">Adding more tasks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/tutorials/everyday_commands/">Everyday Heft commands</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/tutorials/heft_and_rush/">Interfacing with Rush</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Advanced topics</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/advanced/heft-config-file/">@rushstack/heft-config-file</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Heft plugins</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/plugins/package_index/">(package index)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/plugins/api-extractor/">API Extractor</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/plugins/copy-files/">Copy files</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/plugins/delete-files/">Delete files</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/plugins/dev-cert/">Dev certificate</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/plugins/jest/">Jest</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/plugins/lint/">ESlint / TSLint</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/plugins/node-service/">Node.js service</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/plugins/run-script/">Run script</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/plugins/sass/">Sass</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/plugins/serverless-stack/">Serverless Stack</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/plugins/storybook/">Storybook</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/plugins/typescript/">TypeScript</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/plugins/webpack/">Webpack</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Heft config files</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/configs/environment_vars/">Environment variables</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/configs/api-extractor-task_json/">api-extractor-task.json</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/configs/heft_json/">heft.json</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/configs/node-service_json/">node-service.json</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/configs/rig_json/">rig.json</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/configs/sass_json/">sass.json</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/configs/typescript_json/">typescript.json</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/configs/other_files/">Other config files</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Support</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/support/help/">Help</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/support/news/">What&#x27;s new</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/support/contributing/">Contributing</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_xjo8"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_h54n"><div class="docItemContainer_ZJUz"><article><div class="tocCollapsible_bs80 theme-doc-toc-mobile tocMobile_ZG1n"><button type="button" class="clean-btn tocCollapsibleButton_SJYF">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Heft architecture</h1></header><h2 class="anchor anchorWithStickyNavbar_g9Wv" id="read-this-first-">Read this first ðŸŽˆ<a href="#read-this-first-" class="hash-link" aria-label="Direct link to Read this first ðŸŽˆ" title="Direct link to Read this first ðŸŽˆ">â€‹</a></h2><p>Here&#x27;s a quick summary of the most important concepts of Heft:</p><h3 class="anchor anchorWithStickyNavbar_g9Wv" id="action">Action<a href="#action" class="hash-link" aria-label="Direct link to Action" title="Direct link to Action">â€‹</a></h3><p>In Heft&#x27;s terminology, an &quot;action&quot; is command-line verb, as formalized by Rush Stack&#x27;s <a href="https://www.npmjs.com/package/@rushstack/ts-command-line" target="_blank" rel="noopener noreferrer">ts-command-line</a> system. Use <code>heft --help</code> to see the available actions. The <code>clean</code> and <code>run</code> actions are provided by Heft itself; the others are produced by your <strong>heft.json</strong> configuration.</p><p><strong>Example:</strong> A shell command <code>heft test --clean</code> is invoking the <code>test</code> action.</p><blockquote><p><strong>Note:</strong> Early releases of Heft also used the word &quot;action&quot; for <code>eventActions</code> in <strong>heft.json</strong>. This terminology is no longer used.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_g9Wv" id="parameter">Parameter<a href="#parameter" class="hash-link" aria-label="Direct link to Parameter" title="Direct link to Parameter">â€‹</a></h3><p>Actions support various command-line &quot;parameters&quot; for adjusting behavior. Some parameters are defined by Heft itself; others are contributed by Heft plugins.</p><p><strong>Example:</strong> A shell command <code>heft test --clean</code> is using the <code>--clean</code> parameter.</p><h3 class="anchor anchorWithStickyNavbar_g9Wv" id="task">Task<a href="#task" class="hash-link" aria-label="Direct link to Task" title="Direct link to Task">â€‹</a></h3><p>Heft &quot;tasks&quot; are defined in the <code>tasksByName</code> section of a <strong>heft.json</strong> config file for your project. Tasks typically read input files and/or generate output files, often by invoking a familiar tool such as TypeScript or ESLint. Each task loads a Heft task plugin (see below). It&#x27;s possible for two different tasks to load the same plugin. Tasks can depend on each other, which determines scheduling order.</p><p><strong>Example:</strong> The <code>@rushstack/heft-web-rig</code> configuration <a href="https://github.com/microsoft/rushstack/blob/9ffb14519dd42e5808e56bc2ea80c8734f5f2e5b/rigs/heft-web-rig/profiles/app/config/heft.json#L53" target="_blank" rel="noopener noreferrer">defines</a> a task called <code>webpack</code>.</p><h3 class="anchor anchorWithStickyNavbar_g9Wv" id="phase">Phase<a href="#phase" class="hash-link" aria-label="Direct link to Phase" title="Direct link to Phase">â€‹</a></h3><p>A &quot;phase&quot; is an arrangement of Heft tasks, defined in the <code>phasesByName</code> section of a <strong>heft.json</strong> config file for your project. In that file, phases are given names such as <code>build</code> or <code>test</code>. Defining a phase creates two corresponding command-line actions. For example, the <code>test</code> phase produces a <code>heft test</code> and <code>heft test-watch</code> action. The <code>-watch</code> variant is for interactive watch mode, for example a localhost dev server.</p><p>If tasks belong to the same phase, they can share memory objects for optimization; otherwise, they must only communicate by writing files to disk. This requirement supports integration with <a href="https://rushjs.io/pages/maintainer/phased_builds/" target="_blank" rel="noopener noreferrer">Rush phases</a> which may run at different times or on different computers, communicating via the Rush build cache.</p><p><strong>Example:</strong> The <code>@rushstack/heft-web-rig</code> configuration <a href="https://github.com/microsoft/rushstack/blob/9ffb14519dd42e5808e56bc2ea80c8734f5f2e5b/rigs/heft-web-rig/profiles/app/config/heft.json#L21" target="_blank" rel="noopener noreferrer">defines</a> a <code>build</code> phase that incorporates a <code>webpack</code> task.</p><h3 class="anchor anchorWithStickyNavbar_g9Wv" id="plugin">Plugin<a href="#plugin" class="hash-link" aria-label="Direct link to Plugin" title="Direct link to Plugin">â€‹</a></h3><p>Heft plugins are TypeScript classes that implement the <code>IHeftPlugin</code> contract. There are two kinds of plugins:</p><ul><li>a <strong>task plugin</strong> can be loaded by <strong>heft.json</strong> tasks and provides their implementation</li><li>a <strong>lifecycle plugin</strong> provides general functionality that is not specific to any task; for example, to collect timing metrics</li></ul><h3 class="anchor anchorWithStickyNavbar_g9Wv" id="plugin-package">Plugin package<a href="#plugin-package" class="hash-link" aria-label="Direct link to Plugin package" title="Direct link to Plugin package">â€‹</a></h3><p>A &quot;plugin package&quot; is an NPM package providing Heft plugins. The NPM package naming pattern is <code>heft-____-plugin</code> or <code>heft-____-plugins</code> (according to the number of plugins). <strong>Built-in plugins</strong> are loaded directly from the <code>@rushstack/heft</code> package.</p><p>See the <a href="/pages/plugins/package_index/">Plugin package index</a> for the list of official plugins.</p><p><strong>Example:</strong> The <code>@rushstack/heft-jest-plugin</code> package implements <a href="https://github.com/microsoft/rushstack/blob/9ffb14519dd42e5808e56bc2ea80c8734f5f2e5b/heft-plugins/heft-jest-plugin/src/JestPlugin.ts#L144" target="_blank" rel="noopener noreferrer">jest-plugin</a>.</p><h3 class="anchor anchorWithStickyNavbar_g9Wv" id="plugin-manifest">Plugin manifest<a href="#plugin-manifest" class="hash-link" aria-label="Direct link to Plugin manifest" title="Direct link to Plugin manifest">â€‹</a></h3><p>Each plugin package includes a file <strong>heft-plug.json</strong> which is called the &quot;plugin manifest.&quot; It describes the available plugins, their options, and their command-line parameters. Heft is data-driven, which means that such information can be discovered without executing any custom scripts. (Although scripted configuration is very popular, it has many problems such as unexpected performance costs, unpredictable behavior that hinders caching, and poor error messages.)</p><p><strong>Example:</strong> The <code>@rushstack/heft-jest-plugin</code> package declares <code>jest-plugin</code> in <a href="https://github.com/microsoft/rushstack/blob/9ffb14519dd42e5808e56bc2ea80c8734f5f2e5b/heft-plugins/heft-jest-plugin/heft-plugin.json" target="_blank" rel="noopener noreferrer">this manifest</a>.</p><h3 class="anchor anchorWithStickyNavbar_g9Wv" id="hook">Hook<a href="#hook" class="hash-link" aria-label="Direct link to Hook" title="Direct link to Hook">â€‹</a></h3><p>Heft plugins can register handlers for various events during the build lifecycle. The API terminology of &quot;tapping&quot; event &quot;hooks&quot; comes from Heft&#x27;s usage of the <a href="https://www.npmjs.com/package/tapable" target="_blank" rel="noopener noreferrer">tapable</a> system, familiar from Webpack plugins.</p><p><strong>Example:</strong> In Heft&#x27;s source code, the <a href="https://github.com/microsoft/rushstack/blob/9ffb14519dd42e5808e56bc2ea80c8734f5f2e5b/apps/heft/src/pluginFramework/HeftTaskSession.ts#L135" target="_blank" rel="noopener noreferrer">IHeftTaskHooks</a> interface exposes some hooks.</p><h3 class="anchor anchorWithStickyNavbar_g9Wv" id="rig-package">Rig package<a href="#rig-package" class="hash-link" aria-label="Direct link to Rig package" title="Direct link to Rig package">â€‹</a></h3><p>The main philosophy of Heft is to move build logic into plugin packages, so that your build process is defined by config files instead of program scripts. In a large monorepo, this greatly reduces maintenance costs, by ensuring that program scripts are developed as professional software and not ad hoc commands in a <code>.js</code> file.</p><p>The Rush Stack <a href="/pages/intro/rig_packages/">rig system</a> goes a step further, optionally moving config files into a centralized NPM package called a &quot;rig.&quot; Rigs define standardized configurations for your projects. In a large monorepo, they formalize the configurations that your build team has agreed to support. Heft also allows <code>devDependencies</code> to be resolved from rig packages, reducing <strong>package.json</strong> clutter.</p><p><strong>Example:</strong> <a href="https://github.com/microsoft/rushstack/tree/main/rigs/heft-web-rig" target="_blank" rel="noopener noreferrer">@rushstack/heft-web-rig</a> is Rush Stack&#x27;s reference rig for web projects.</p><h3 class="anchor anchorWithStickyNavbar_g9Wv" id="rig-profile">Rig profile<a href="#rig-profile" class="hash-link" aria-label="Direct link to Rig profile" title="Direct link to Rig profile">â€‹</a></h3><p>A single rig package can provide multiple &quot;profiles&quot; tailored for specific purposes. Profiles within a rig package share the same rigged <code>devDependencies</code>, and may also share configuration via <code>&quot;extends&quot;</code> inheritance.</p><p><strong>Example:</strong> The <code>@rushstack/heft-web-rig</code> rig package currently defines <a href="https://github.com/microsoft/rushstack/tree/main/rigs/heft-web-rig/profiles" target="_blank" rel="noopener noreferrer">two profiles</a>, <code>app</code> and <code>library</code>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/microsoft/rushstack-websites/tree/main/websites/heft.rushstack.io/docs/pages/intro/architecture.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Svw6" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_movT"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/pages/intro/getting_started/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Getting started</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/pages/intro/rig_packages/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Using rig packages</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_C0d9 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#read-this-first-" class="table-of-contents__link toc-highlight">Read this first ðŸŽˆ</a><ul><li><a href="#action" class="table-of-contents__link toc-highlight">Action</a></li><li><a href="#parameter" class="table-of-contents__link toc-highlight">Parameter</a></li><li><a href="#task" class="table-of-contents__link toc-highlight">Task</a></li><li><a href="#phase" class="table-of-contents__link toc-highlight">Phase</a></li><li><a href="#plugin" class="table-of-contents__link toc-highlight">Plugin</a></li><li><a href="#plugin-package" class="table-of-contents__link toc-highlight">Plugin package</a></li><li><a href="#plugin-manifest" class="table-of-contents__link toc-highlight">Plugin manifest</a></li><li><a href="#hook" class="table-of-contents__link toc-highlight">Hook</a></li><li><a href="#rig-package" class="table-of-contents__link toc-highlight">Rig package</a></li><li><a href="#rig-profile" class="table-of-contents__link toc-highlight">Rig profile</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Â© 2024 Microsoft</div></div></div></footer></div>
<script src="/assets/js/runtime~main.921998bf.js"></script>
<script src="/assets/js/main.e60925dc.js"></script>
</body>
</html>