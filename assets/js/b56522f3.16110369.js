"use strict";(self.webpackChunkheft_rushstack_io=self.webpackChunkheft_rushstack_io||[]).push([[1325],{158:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>f});var a=n(6393);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var o=a.createContext({}),u=function(e){var t=a.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=u(e.components);return a.createElement(o.Provider,{value:t},e.children)},c="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,o=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),c=u(n),d=r,f=c["".concat(o,".").concat(d)]||c[d]||m[d]||l;return n?a.createElement(f,i(i({ref:t},p),{},{components:n})):a.createElement(f,i({ref:t},p))}));function f(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,i=new Array(l);i[0]=d;var s={};for(var o in t)hasOwnProperty.call(t,o)&&(s[o]=t[o]);s.originalType=e,s[c]="string"==typeof e?e:r,i[1]=s;for(var u=2;u<l;u++)i[u]=n[u];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},5989:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(6393),r=n(5881);const l={tabItem:"tabItem_zxeG"};function i(e){var t=e.children,n=e.hidden,i=e.className;return a.createElement("div",{role:"tabpanel",className:(0,r.Z)(l.tabItem,i),hidden:n},t)}},1453:(e,t,n)=>{n.d(t,{Z:()=>N});var a=n(9122),r=n(6393),l=n(5881),i=n(1149),s=n(8791),o=n(5602),u=n(7947),p=n(2026);function c(e){return function(e){return r.Children.map(e,(function(e){if((0,r.isValidElement)(e)&&"value"in e.props)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')}))}(e).map((function(e){var t=e.props;return{value:t.value,label:t.label,attributes:t.attributes,default:t.default}}))}function m(e){var t=e.values,n=e.children;return(0,r.useMemo)((function(){var e=null!=t?t:c(n);return function(e){var t=(0,u.l)(e,(function(e,t){return e.value===t.value}));if(t.length>0)throw new Error('Docusaurus error: Duplicate values "'+t.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.')}(e),e}),[t,n])}function d(e){var t=e.value;return e.tabValues.some((function(e){return e.value===t}))}function f(e){var t=e.queryString,n=void 0!==t&&t,a=e.groupId,l=(0,s.k6)(),i=function(e){var t=e.queryString,n=void 0!==t&&t,a=e.groupId;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=a?a:null}({queryString:n,groupId:a});return[(0,o._X)(i),(0,r.useCallback)((function(e){if(i){var t=new URLSearchParams(l.location.search);t.set(i,e),l.replace(Object.assign({},l.location,{search:t.toString()}))}}),[i,l])]}function h(e){var t,n,a,l,i=e.defaultValue,s=e.queryString,o=void 0!==s&&s,u=e.groupId,c=m(e),h=(0,r.useState)((function(){return function(e){var t,n=e.defaultValue,a=e.tabValues;if(0===a.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!d({value:n,tabValues:a}))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+n+'" but none of its children has the corresponding value. Available values are: '+a.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");return n}var r=null!=(t=a.find((function(e){return e.default})))?t:a[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:i,tabValues:c})})),g=h[0],b=h[1],y=f({queryString:o,groupId:u}),k=y[0],v=y[1],N=(t=function(e){return e?"docusaurus.tab."+e:null}({groupId:u}.groupId),n=(0,p.Nk)(t),a=n[0],l=n[1],[a,(0,r.useCallback)((function(e){t&&l.set(e)}),[t,l])]),w=N[0],T=N[1],j=function(){var e=null!=k?k:w;return d({value:e,tabValues:c})?e:null}();return(0,r.useLayoutEffect)((function(){j&&b(j)}),[j]),{selectedValue:g,selectValue:(0,r.useCallback)((function(e){if(!d({value:e,tabValues:c}))throw new Error("Can't select invalid tab value="+e);b(e),v(e),T(e)}),[v,T,c]),tabValues:c}}var g=n(7499);const b={tabList:"tabList_ncVf",tabItem:"tabItem_YGAs"};function y(e){var t=e.className,n=e.block,s=e.selectedValue,o=e.selectValue,u=e.tabValues,p=[],c=(0,i.o5)().blockElementScrollPositionUntilNextRender,m=function(e){var t=e.currentTarget,n=p.indexOf(t),a=u[n].value;a!==s&&(c(t),o(a))},d=function(e){var t,n=null;switch(e.key){case"Enter":m(e);break;case"ArrowRight":var a,r=p.indexOf(e.currentTarget)+1;n=null!=(a=p[r])?a:p[0];break;case"ArrowLeft":var l,i=p.indexOf(e.currentTarget)-1;n=null!=(l=p[i])?l:p[p.length-1]}null==(t=n)||t.focus()};return r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,l.Z)("tabs",{"tabs--block":n},t)},u.map((function(e){var t=e.value,n=e.label,i=e.attributes;return r.createElement("li",(0,a.Z)({role:"tab",tabIndex:s===t?0:-1,"aria-selected":s===t,key:t,ref:function(e){return p.push(e)},onKeyDown:d,onClick:m},i,{className:(0,l.Z)("tabs__item",b.tabItem,null==i?void 0:i.className,{"tabs__item--active":s===t})}),null!=n?n:t)})))}function k(e){var t=e.lazy,n=e.children,a=e.selectedValue;if(n=Array.isArray(n)?n:[n],t){var l=n.find((function(e){return e.props.value===a}));return l?(0,r.cloneElement)(l,{className:"margin-top--md"}):null}return r.createElement("div",{className:"margin-top--md"},n.map((function(e,t){return(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==a})})))}function v(e){var t=h(e);return r.createElement("div",{className:(0,l.Z)("tabs-container",b.tabList)},r.createElement(y,(0,a.Z)({},e,t)),r.createElement(k,(0,a.Z)({},e,t)))}function N(e){var t=(0,g.Z)();return r.createElement(v,(0,a.Z)({key:String(t)},e))}},3847:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>m,contentTitle:()=>p,default:()=>g,frontMatter:()=>u,metadata:()=>c,toc:()=>d});var a=n(9122),r=n(2501),l=(n(6393),n(158)),i=n(1453),s=n(5989),o=["components"],u={title:"TypeScript plugin"},p=void 0,c={unversionedId:"pages/plugins/typescript",id:"pages/plugins/typescript",title:"TypeScript plugin",description:"|     |     |",source:"@site/docs/pages/plugins/typescript.md",sourceDirName:"pages/plugins",slug:"/pages/plugins/typescript",permalink:"/pages/plugins/typescript",draft:!1,editUrl:"https://github.com/microsoft/rushstack-websites/tree/main/websites/heft.rushstack.io/docs/pages/plugins/typescript.md",tags:[],version:"current",frontMatter:{title:"TypeScript plugin"},sidebar:"docsSidebar",previous:{title:"Storybook plugin",permalink:"/pages/plugins/storybook"},next:{title:"Webpack plugins",permalink:"/pages/plugins/webpack"}},m={},d=[{value:"When to use it",id:"when-to-use-it",level:2},{value:"package.json dependencies",id:"packagejson-dependencies",level:2},{value:"Configuration",id:"configuration",level:2},{value:"See also",id:"see-also",level:2}],f={toc:d},h="wrapper";function g(e){var t=e.components,n=(0,r.Z)(e,o);return(0,l.kt)(h,(0,a.Z)({},f,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("table",null,(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"Plugin package:")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{parentName:"td",href:"https://github.com/microsoft/rushstack/blob/main/heft-plugins/heft-typescript-plugin"},"@rushstack/heft-typescript-plugin"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"Plugin name:")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{parentName:"td",href:"https://github.com/microsoft/rushstack/blob/main/heft-plugins/heft-typescript-plugin/heft-plugin.json"},"typescript-plugin")," implemented by ",(0,l.kt)("a",{parentName:"td",href:"https://github.com/microsoft/rushstack/blob/main/heft-plugins/heft-typescript-plugin/src/TypeScriptPlugin.ts"},"TypeScriptPlugin.ts"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"Plugin config file:")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{parentName:"td",href:"/pages/configs/typescript_json"},"typescript.json"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"heft.json options:")),(0,l.kt)("td",{parentName:"tr",align:null},"(none)")))),(0,l.kt)("p",null,"This plugin invokes the compiler for the ",(0,l.kt)("a",{parentName:"p",href:"https://www.typescriptlang.org/"},"TypeScript")," programming language."),(0,l.kt)("h2",{id:"when-to-use-it"},"When to use it"),(0,l.kt)("p",null,'TypeScript is the standard programming language for Rush Stack. There are many benefits to having one "lingua franca" across all coding investments, rather than having to maintain different expertise and libraries for different languages.'),(0,l.kt)("p",null,"We recommend TypeScript for:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Application development:")," It's even a good choice for prototypes and small experiments."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Tooling infrastructure:")," A great developer experience multiplies everyone's productivity, so build tools should be treated as first-class software projects with their own designs, documentation, and tests."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Device apps:")," Where possible, TypeScript can also be used for native development via runtime hosts such as ",(0,l.kt)("a",{parentName:"li",href:"https://reactnative.dev/"},"React Native"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Desktop apps:")," There are also runtime hosts such as ",(0,l.kt)("a",{parentName:"li",href:"https://www.electronjs.org/"},"Electron")," for making desktop apps.")),(0,l.kt)("p",null,"Obviously certain components may inevitably require Java, C++, Swift, etc. But ideally developers should not be required to install native SDKs unless they're working on those components. The ",(0,l.kt)("a",{parentName:"p",href:"https://expo.io/features"},"Expo client")," takes this concept to an extreme, enabling you to compile and run a phone app without installing native tools at all. This ideal isn't always feasible in practice, of course. It's a mentality, not a dogma. The main point is that there are significant benefits to normalizing the code base so that any engineer can easily contribute to any project, and any project can load any library."),(0,l.kt)("h2",{id:"packagejson-dependencies"},"package.json dependencies"),(0,l.kt)("p",null,"If you are using a standard rig such as ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/microsoft/rushstack/tree/main/rigs/heft-node-rig"},"@rushstack/heft-node-rig"),"\nor ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/microsoft/rushstack/tree/main/rigs/heft-web-rig"},"@rushstack/heft-web-rig"),", then TypeScript\nwill already be loaded and configured."),(0,l.kt)("p",null,"Otherwise, you'll need to add the plugin package to your project:"),(0,l.kt)(i.Z,{mdxType:"Tabs"},(0,l.kt)(s.Z,{value:"rush-install",label:"Rush",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"# If you are using Rush, run this shell command in your project folder:\nrush add --package @rushstack/heft-typescript-plugin --dev\n"))),(0,l.kt)(s.Z,{value:"npm-install",label:"NPM",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"# If you are using vanilla NPM, run this shell command in your project folder:\nnpm install @rushstack/heft-typescript-plugin --save-dev\n")))),(0,l.kt)("p",null,"You will also need to add the ",(0,l.kt)("inlineCode",{parentName:"p"},"typescript")," package to your project:"),(0,l.kt)(i.Z,{mdxType:"Tabs"},(0,l.kt)(s.Z,{value:"rush-install",label:"Rush",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"# If you are using Rush, run this shell command in your project folder:\nrush add --package typescript --dev\n"))),(0,l.kt)(s.Z,{value:"npm-install",label:"NPM",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"# If you are using vanilla NPM, run this shell command in your project folder:\nnpm install typescript --save-dev\n")))),(0,l.kt)("p",null,"If your ",(0,l.kt)("strong",{parentName:"p"},"tsconfig.json")," enables ",(0,l.kt)("inlineCode",{parentName:"p"},'"importHelpers": true')," for more efficient transpiler output, you may also need a dependency on ",(0,l.kt)("strong",{parentName:"p"},"tslib"),":"),(0,l.kt)(i.Z,{mdxType:"Tabs"},(0,l.kt)(s.Z,{value:"rush-install",label:"Rush",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"# If you are using Rush, run this shell command in your project folder:\nrush add --package tslib --dev\n"))),(0,l.kt)(s.Z,{value:"npm-install",label:"NPM",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"# Or if you are using vanilla NPM, run this shell command in your project folder:\nnpm install tslib --save-dev\n")))),(0,l.kt)("h2",{id:"configuration"},"Configuration"),(0,l.kt)("p",null,"If TypeScript is not already being provided by a rig, your ",(0,l.kt)("a",{parentName:"p",href:"/pages/configs/heft_json"},"heft.json config file")," could\ninvoke it like in this example:"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"<","project folder",">","/config/heft.json")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'{\n  "$schema": "https://developer.microsoft.com/json-schemas/heft/v0/heft.schema.json",\n  . . .\n  "phasesByName": {\n    "build": {\n      "cleanFiles": [\n        { "sourcePath": "dist" },\n        { "sourcePath": "lib" },\n        { "sourcePath": "lib-amd" },\n        { "sourcePath": "lib-commonjs" },\n        { "sourcePath": "lib-es6" }\n      ],\n      "tasksByName": {\n        "typescript": {\n          "taskPlugin": {\n            "pluginPackage": "@rushstack/heft-typescript-plugin"\n          }\n        }\n      }\n    }\n  }\n}\n')),(0,l.kt)("p",null,"The primary configuration comes from TypeScript's ",(0,l.kt)("a",{parentName:"p",href:"https://www.typescriptlang.org/docs/handbook/tsconfig-json.html"},"tsconfig.json")," file."),(0,l.kt)("p",null,"For advanced scenarios, Heft also supports an optional ",(0,l.kt)("a",{parentName:"p",href:"/pages/configs/typescript_json"},"config/typescript.json"),"\nconfig file that can be used to configure toolchain features such as multiple emit targets for the TypeScript\ncompiler. It also supports a ",(0,l.kt)("inlineCode",{parentName:"p"},"staticAssetsToCopy")," feature for copying files such as ",(0,l.kt)("inlineCode",{parentName:"p"},".css")," and ",(0,l.kt)("inlineCode",{parentName:"p"},".json"),"\ninto the emit target folder."),(0,l.kt)("h2",{id:"see-also"},"See also"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"/pages/configs/typescript_json"},"config/typescript.json")," config file for Heft"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://www.typescriptlang.org/tsconfig"},"tsconfig.json")," reference")))}g.isMDXComponent=!0}}]);